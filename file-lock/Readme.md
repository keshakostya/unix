# Задача 2 - блокировка файлов

## Загрузка и сборка
```bash
$ git clone https://github.com/keshakostya/unix.git
$ cd unix/
$ git checkout feature/file-lock
$ cd file-lock
$ make
```

После выполнения команды `make` исполняемый файлы будет лежать в `./build` по имени `testapp`

## Запуск тестового скрипта
```
$ ./runme.sh
$ cat ./build/result.txt
```

Скрипт запускает 10 процессов testapp в фоне.

Каждый из них в бесконечном цикле на секунду блокирует файл `./build/myfile.txt` записывает в него свой pid.

Через 5 минут скрипт закрывает процессы по сигналу sigint.

В `./build/result.txt` будет таблица со статистикой. В каждой строке будет написано кол-во успешных блокировок и pid процесса.

Пример
```
     25 4309
     28 4311
     32 4313
     31 4315
     27 4317
     37 4319
     22 4321
     32 4323
     34 4325
     31 4327
```

## Сборка отдельной библиотеки
Можно отдельно собрать библиотеку для блокирования файлов через lock файл
```bash
$ make lib-file-lock
```
Библиотека собирается как разделяемая и будет лежать по пути `./build/libfilelock.so`
